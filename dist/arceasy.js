(function(e){var r={};function a(t){if(r[t]){return r[t].exports}var i=r[t]={i:t,l:false,exports:{}};e[t].call(i.exports,i,i.exports,a);i.l=true;return i.exports}a.m=e;a.c=r;a.i=function(e){return e};a.d=function(e,r,t){if(!a.o(e,r)){Object.defineProperty(e,r,{configurable:false,enumerable:true,get:t})}};a.n=function(e){var r=e&&e.__esModule?function r(){return e["default"]}:function r(){return e};a.d(r,"a",r);return r};a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};a.p="";return a(a.s=5)})([function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.global=r.constructors=r.start=r.options=undefined;var t=a(6);var i=s(t);var n=a(1);var o=s(n);var l=a(2);function s(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var a in e){if(Object.prototype.hasOwnProperty.call(e,a))r[a]=e[a]}}r.default=e;return r}}var u={map:"",view:"",options:{element:"",scale:25e6,center:{longitude:-13.78,latitude:-52.17},basemap:"streets",stars:"",atmosphere:"",cors:"",proxy:""},loaded:false};var d={layer:{FeatureLayer:"",TileLayer:""},map:"",container:"",view:"",utils:{watchUtils:"",Search:"",jsonUtils:"",Extent:""},renderer:{UniqueValueRenderer:"",ClassBreaksRenderer:"",ExtrudeSymbol3DLayer:"",PolygonSymbol3D:"",SimpleRenderer:"",SimpleMarkerSymbol:"",PictureMarkerSymbol:"",SimpleLineSymbol:"",SimpleFillSymbol:""}};var c=function e(r){if(r){r.element||o.fatal("You need pass an valid DOM element");r.scale||o.warn("You not set scale. Usign default scale: "+u.options.scale);r.center.longitude||o.warn("You not set intial longitude. Usign default: "+u.options.longitude);r.center.latitude||o.warn("You not set intial latitude. Usign default: "+u.options.latitude);r.basemap||o.warn("You not set initial basemap. Usign default: "+u.options.basemap);r.stars||o.warn("You not set if map usign stars. Usign default: "+u.options.stars);r.atmosphere||o.warn("You not set if map usign atmosphere efect. Usign default: "+u.options.atmosphere);r.cors||o.warn("You not set any URL to enable CORS requests");r.proxy||o.warn("You not set any URL to proxy your requests");u.options={element:r.element,scale:r.scale||u.options.scale,center:{longitude:r.longitude||u.options.longitude,latitude:r.latitude||u.options.latitude},basemap:r.basemap||u.options.basemap,stars:r.stars||u.options.stars,atmosphere:r.atmosphere||u.options.atmosphere,cors:r.cors||"",proxy:r.proxy||""};u.loaded=true}else{o.fatal("You need pass some informations to describe your map")}};var f=function e(r){if(r!==undefined&&u.loaded){if(!i.isLoaded()){i.bootstrap(function(e){if(e){o.error(e)}o.log("Waiting ESRI server...");p()},{url:r})}else{o.log("Waiting ESRI server...");p()}}else{o.fatal("Fatal error! You must provider an CDN.")}};var p=function e(){if(u.loaded){i.dojoRequire(["esri/config","esri/Map","esri/geometry/Geometry","esri/Camera","esri/geometry/Extent","esri/views/SceneView","esri/layers/FeatureLayer","esri/layers/TileLayer","esri/layers/GraphicsLayer","esri/core/watchUtils","esri/core/Collection","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer","esri/renderers/SimpleRenderer","esri/symbols/ExtrudeSymbol3DLayer","esri/symbols/PolygonSymbol3D","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/Graphic","esri/geometry/Point","esri/symbols/PointSymbol3D","esri/symbols/ObjectSymbol3DLayer","esri/widgets/Search","esri/renderers/support/jsonUtils","dojo/on","dojo/domReady!"],function(e,r,a,t,i,n,s,c,f,p,y,v,g,b,w,S,h,x,L,P,j,M,O,E,_,U,C){u.options.cors.forEach(function(r){e.request.corsEnabledServers.push(r)});e.request.proxyUrl=u.options.proxy||"";d.Map=r;d.SceneView=n;d.layer.FeatureLayer=s;d.layer.TileLayer=c;d.layer.GraphicsLayer=f;d.utils.watchUtils=p;d.utils.Search=_;d.utils.jsonUtils=U;d.utils.Extent=i;d.utils.Camera=t;d.renderer.UniqueValueRenderer=v;d.renderer.ClassBreaksRenderer=g;d.renderer.ExtrudeSymbol3DLayer=w;d.renderer.PolygonSymbol3D=S;d.renderer.SimpleRenderer=b;d.renderer.SimpleMarkerSymbol=h;d.renderer.PictureMarkerSymbol=x;d.renderer.SimpleLineSymbol=L;d.renderer.SimpleFillSymbol=P;d.renderer.Graphic=j;d.renderer.Point=M;d.renderer.PointSymbol3D=O;d.renderer.ObjectSymbol3DLayer=E;if(d.Map&&d.SceneView){o.log("All constructorss created!");u.map=m(d.Map,u.options.basemap);u.view=(0,l.createView)(u.map,d.SceneView,u.options)}else{o.error("Error during creating the necessary constructors... Try again.")}})}else{o.fatal("Fatal error! You need set some map options.")}};var m=function e(r,a){o.log("Creating map...");var t=new r({basemap:a,ground:"world-elevation",layers:[]});return t};r.options=c;r.start=f;r.constructors=d;r.global=u},function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.warn=r.fatal=r.error=r.log=undefined;var t=a(4);var i=0;var n=0;var o=0;var l=0;var s=function e(r,a){var n=a!==undefined?a:"";i++;return console.log(i+" "+t.prefix+" "+r,n)};var u=function e(r,a){var i=a!==undefined?a:"";n++;return console.error(n+" "+t.prefix+" "+r,i)};var d=function e(r){o++;throw new Error(o+" "+t.prefix+" "+r)};var c=function e(r,a){var i=a!==undefined?a:"";l++;return console.warn(l+" "+t.prefix+" "+r,i)};r.log=s;r.error=u;r.fatal=d;r.warn=c},function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.changeBasemap=r.newPosition=r.createView=undefined;var t=a(1);var i=o(t);var n=a(0);function o(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var a in e){if(Object.prototype.hasOwnProperty.call(e,a))r[a]=e[a]}}r.default=e;return r}}var l=function e(r,a,t){i.log("Creating View...");var o=n.constructors.utils.Search,l=n.constructors.utils.watchUtils,d=new a({container:t.element,map:r,scale:t.scale,center:[t.longitude,t.latitude],viewingMode:"global",starsEnabled:t.stars,atmosphereEnabled:t.atmosphere});d.then(function(){i.log("View ready!");u(d,o);s(r,d,l)});return d},s=function e(r,a,t){t.whenTrue(a,"stationary",function(){if(a.extent){i.log("View changed! Mapping all layers...");console.log(a.extent.center.latitude,a.extent.center.longitude,a.scale);r.allLayers.map(function(e,r,t){if((a.scale<e.minScale&&a.scale>e.maxScale||e.minScale===0&&e.maxScale===0)&&e.raw!==undefined&&e.visible){if(e.raw.esri.type===0){var n="!xmin="+a.extent.xmin+"!xmax="+a.extent.xmax+"!ymin="+a.extent.ymin+"!ymax="+a.extent.ymax;i.log("Getting extent to request "+e.title);i.log("Requesting to server: "+e.raw.esri.url+"/where="+n);e.definitionExpression=n}i.log("Drawing layer: "+e.title)}})}})},u=function e(r,a){i.log("Changing UI elements...");r.environment.atmosphere.quality="low";var t=new a({view:r});r.ui.add(t,{position:"top-left",index:2});r.ui.remove(["zoom","compass","navigation-toggle"])},d=function e(r){var a=r.coordinates,t=r.scale,o=r.camera;var l=n.global.view;l.goTo({center:[a.longitude,a.latitude],scale:t,tilt:o.tilt,heading:o.heading});i.log("Changing map position...")},c=function e(r){var a=n.global.map;a.basemap=r;i.log("Change basemap...")};r.createView=l;r.newPosition=d;r.changeBasemap=c},function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.showAll=r.hideAll=r.setOpacity=r.setVisibility=r.addNew=r.create=undefined;var t=a(1);var i=o(t);var n=a(0);function o(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var a in e){if(Object.prototype.hasOwnProperty.call(e,a))r[a]=e[a]}}r.default=e;return r}}var l=function e(r){r.forEach(function(e,r){var a=n.constructors.layer;var t=n.constructors.utils;var o=void 0;if(e.esri.type===0){i.log("Creating new Feature Layer...");o=a.FeatureLayer}else if(e.esri.type===1){i.log("Creating new Tile Layer...");o=a.TileLayer}i.log("Adding id by index on layer");e.id=r;s(o,t.watchUtils,t.jsonUtils,e)})};var s=function e(r,a,t,o){i.log("Adding layer on map: "+o.title+" | Initial visibility: "+o.esri.visible);i.log("Loading layer from: "+o.esri.url);var l=new r({id:o.id,url:o.esri.url,definitionExpression:o.esri.definitionExpression,raw:o,visible:o.esri.visible});if(l.raw.esri.renderer){i.log("Applying renderer...");l.renderer=t.fromJSON(l.raw.esri.renderer)}l.then(function(){i.log("Layer "+l.title+" ready!");i.log("View waiting changes...");if(l.raw.esri.type===1){l.minScale=l.raw.esri.minScale!==null?l.raw.esri.minScale:0;l.maxScale=l.raw.esri.maxScale!==null?l.raw.esri.maxScale:0;i.log("minScale: "+l.minScale+" and maxScale: "+l.maxScale+" defined manually")}});n.global.map.add(l)};var u=function e(r,a){var t=n.global.map;t.allLayers.map(function(e,t,n){if(e.raw!==undefined){if(e.raw.title===r||e.raw.id===r){e.visible=a;i.log("Change visibility of layer: "+r+" to: "+a)}}})};var d=function e(r,a){var t=n.global.map;t.allLayers.map(function(e,t,n){if(e.raw!==undefined){if(e.raw.title===r||e.raw.id===r){e.opacity=a/100;i.log("Change opacity of layer: "+r+" to: "+a)}}})};var c=function e(){var r=n.global.map;r.allLayers.map(function(e,r,a){if(e.raw!==undefined){if(e.visible===true){e.visible=false;i.log("Change visibility of layer: "+e.raw.title+" to: "+false)}}})};var f=function e(){var r=n.global.map;r.allLayers.map(function(e,r,a){if(e.raw!==undefined){if(e.visible===false){e.visible=true;i.log("Change visibility of layer: "+e.raw.title+" to: "+false)}}})};r.create=l;r.addNew=s;r.setVisibility=u;r.setOpacity=d;r.hideAll=c;r.showAll=f},function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});var t=r.prefix="[ArcEasy]"},function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.layers=r.view=r.map=undefined;var t=a(0);var i=u(t);var n=a(2);var o=u(n);var l=a(3);var s=u(l);function u(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var a in e){if(Object.prototype.hasOwnProperty.call(e,a))r[a]=e[a]}}r.default=e;return r}}r.map=i;r.view=o;r.layers=s},function(e,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:true});r["isLoaded"]=i;r["bootstrap"]=n;r["dojoRequire"]=o;function t(){return document.querySelector("script[data-esri-loader]")}function i(){return typeof window["require"]!=="undefined"&&t()}function n(e,r){if(r===void 0){r={}}if(!r.url){r.url="https://js.arcgis.com/4.3/"}if(t()){e(new Error("The ArcGIS API for JavaScript is already loaded."));return}var a=document.createElement("script");a.type="text/javascript";a.src=r.url;a.dataset["esriLoader"]="loading";a.onload=function(){a.dataset["esriLoader"]="loaded";var r=window["require"];if(e){e(null,r)}};document.body.appendChild(a)}function o(e,r){if(i()){window["require"](e,r)}else{var a=t();if(a){var n=function(){window["require"](e,r);a.removeEventListener("load",n,false)};a.addEventListener("load",n)}else{throw new Error("The ArcGIS API for JavaScript has not been loaded. You must first call esriLoader.bootstrap()")}}}r["default"]={isLoaded:i,bootstrap:n,dojoRequire:o}}]);
//# sourceMappingURL=arceasy.js.map