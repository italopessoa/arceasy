(function(e){var r={};function t(o){if(r[o]){return r[o].exports}var a=r[o]={i:o,l:false,exports:{}};e[o].call(a.exports,a,a.exports,t);a.l=true;return a.exports}t.m=e;t.c=r;t.i=function(e){return e};t.d=function(e,r,o){if(!t.o(e,r)){Object.defineProperty(e,r,{configurable:false,enumerable:true,get:o})}};t.n=function(e){var r=e&&e.__esModule?function r(){return e["default"]}:function r(){return e};t.d(r,"a",r);return r};t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};t.p="";return t(t.s=5)})([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.global=r.constructors=r.start=r.options=undefined;var o=t(6);var a=u(o);var n=t(1);var i=u(n);var s=t(2);var l=t(4);function u(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t))r[t]=e[t]}}r.default=e;return r}}var c=function e(r){if(r){r.element||i.fatal("You need pass an valid DOM element");r.scale||i.warn("You not set scale. Usign default scale: "+l.global.options.scale);r.center.longitude||i.warn("You not set intial longitude. Usign default: "+l.global.options.longitude);r.center.latitude||i.warn("You not set intial latitude. Usign default: "+l.global.options.latitude);r.basemap||i.warn("You not set initial basemap. Usign default: "+l.global.options.basemap);r.stars||i.warn("You not set if map usign stars. Usign default: "+l.global.options.stars);r.atmosphere||i.warn("You not set if map usign atmosphere efect. Usign default: "+l.global.options.atmosphere);r.cors||i.warn("You not set any URL to enable CORS requests");r.proxy||i.warn("You not set any URL to proxy your requests");l.global.options={element:r.element,scale:r.scale||l.global.options.scale,center:{longitude:r.longitude||l.global.options.longitude,latitude:r.latitude||l.global.options.latitude},basemap:r.basemap||l.global.options.basemap,stars:r.stars||l.global.options.stars,atmosphere:r.atmosphere||l.global.options.atmosphere,cors:r.cors||"",proxy:r.proxy||""};l.global.loaded=true}else{i.fatal("You need pass some informations to describe your map")}};var d=function e(r){if(r!==undefined&&l.global.loaded){if(!a.isLoaded()){a.bootstrap(function(e){if(e){i.error(e)}i.log("Waiting ESRI server...");f()},{url:r})}else{i.log("Waiting ESRI server...");f()}}else{i.fatal("Fatal error! You must provider an CDN.")}};var f=function e(){if(l.global.loaded){a.dojoRequire(["esri/config","esri/Map","esri/geometry/Geometry","esri/Camera","esri/geometry/Extent","esri/views/SceneView","esri/layers/FeatureLayer","esri/layers/TileLayer","esri/layers/GraphicsLayer","esri/core/watchUtils","esri/core/Collection","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer","esri/renderers/SimpleRenderer","esri/symbols/ExtrudeSymbol3DLayer","esri/symbols/PolygonSymbol3D","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/Graphic","esri/geometry/Point","esri/symbols/PointSymbol3D","esri/symbols/ObjectSymbol3DLayer","esri/widgets/Search","esri/renderers/support/jsonUtils","dojo/on","dojo/domReady!"],function(e,r,t,o,a,n,u,c,d,f,y,m,g,v,b,w,S,h,x,L,P,j,M,O,E,_,U){l.global.options.cors.forEach(function(r){e.request.corsEnabledServers.push(r)});e.request.proxyUrl=l.global.options.proxy||"";l.constructors.Map=r;l.constructors.SceneView=n;l.constructors.layer.FeatureLayer=u;l.constructors.layer.TileLayer=c;l.constructors.layer.GraphicsLayer=d;l.constructors.utils.watchUtils=f;l.constructors.utils.Search=E;l.constructors.utils.jsonUtils=_;l.constructors.utils.Extent=a;l.constructors.utils.Camera=o;l.constructors.renderer.UniqueValueRenderer=m;l.constructors.renderer.ClassBreaksRenderer=g;l.constructors.renderer.ExtrudeSymbol3DLayer=b;l.constructors.renderer.PolygonSymbol3D=w;l.constructors.renderer.SimpleRenderer=v;l.constructors.renderer.SimpleMarkerSymbol=S;l.constructors.renderer.PictureMarkerSymbol=h;l.constructors.renderer.SimpleLineSymbol=x;l.constructors.renderer.SimpleFillSymbol=L;l.constructors.renderer.Graphic=P;l.constructors.renderer.Point=j;l.constructors.renderer.PointSymbol3D=M;l.constructors.renderer.ObjectSymbol3DLayer=O;if(l.constructors.Map&&l.constructors.SceneView){i.log("All constructorss created!");l.global.map=p(l.constructors.Map,l.global.options.basemap);l.global.view=(0,s.createView)(l.global.map,l.constructors.SceneView,l.global.options)}else{i.error("Error during creating the necessary constructors... Try again.")}})}else{i.fatal("Fatal error! You need set some map options.")}};var p=function e(r,t){i.log("Creating map...");var o=new r({basemap:t,ground:"world-elevation",layers:[]});return o};r.options=c;r.start=d;r.constructors=l.constructors;r.global=l.global},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.warn=r.fatal=r.error=r.log=undefined;var o=t(4);var a=0;var n=0;var i=0;var s=0;var l=function e(r,t){var n=t!==undefined?t:"";a++;return console.log(a+" "+o.prefix+" "+r,n)};var u=function e(r,t){var a=t!==undefined?t:"";n++;return console.error(n+" "+o.prefix+" "+r,a)};var c=function e(r){i++;throw new Error(i+" "+o.prefix+" "+r)};var d=function e(r,t){var a=t!==undefined?t:"";s++;return console.warn(s+" "+o.prefix+" "+r,a)};r.log=l;r.error=u;r.fatal=c;r.warn=d},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.changeBasemap=r.newPosition=r.createView=undefined;var o=t(1);var a=i(o);var n=t(0);function i(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t))r[t]=e[t]}}r.default=e;return r}}var s=function e(r,t,o){a.log("Creating View...");var i=n.constructors.utils.Search,s=n.constructors.utils.watchUtils,c=new t({container:o.element,map:r,scale:o.scale,center:[o.longitude,o.latitude],viewingMode:"global",starsEnabled:o.stars,atmosphereEnabled:o.atmosphere});c.then(function(){a.log("View ready!");u(c,i);l(r,c,s)});return c},l=function e(r,t,o){o.whenTrue(t,"stationary",function(){if(t.extent){a.log("View changed! Mapping all layers...");console.log(t.extent.center.latitude,t.extent.center.longitude,t.scale);r.allLayers.map(function(e,r,o){if((t.scale<e.minScale&&t.scale>e.maxScale||e.minScale===0&&e.maxScale===0)&&e.raw!==undefined&&e.visible){if(e.raw.esri.type===0){var n="!xmin="+t.extent.xmin+"!xmax="+t.extent.xmax+"!ymin="+t.extent.ymin+"!ymax="+t.extent.ymax;a.log("Getting extent to request "+e.title);a.log("Requesting to server: "+e.raw.esri.url+"/where="+n);e.definitionExpression=n}a.log("Drawing layer: "+e.title)}})}})},u=function e(r,t){a.log("Changing UI elements...");r.environment.atmosphere.quality="low";var o=new t({view:r});r.ui.add(o,{position:"top-left",index:2});r.ui.remove(["zoom","compass","navigation-toggle"])},c=function e(r){var t=r.coordinates,o=r.scale,i=r.camera;var s=n.global.view;s.goTo({center:[t.longitude,t.latitude],scale:o,tilt:i.tilt,heading:i.heading});a.log("Changing map position...")},d=function e(r){var t=n.global.map;t.basemap=r;a.log("Change basemap...")};r.createView=s;r.newPosition=c;r.changeBasemap=d},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.showAll=r.hideAll=r.setOpacity=r.setVisibility=r.addNew=r.create=undefined;var o=t(1);var a=i(o);var n=t(4);function i(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t))r[t]=e[t]}}r.default=e;return r}}var s=function e(r){var t=n.constructors.layer;var o=n.constructors.utils;var i=void 0;r.forEach(function(e,r){if(e.esri.type===0){a.log("Creating new Feature Layer...");i=t.FeatureLayer}else if(e.esri.type===1){a.log("Creating new Tile Layer...");i=t.TileLayer}a.log("Adding id by index on layer");e.id=r;l(i,o.watchUtils,o.jsonUtils,e)})};var l=function e(r,t,o,i){a.log("Adding layer on map: "+i.title+" | Initial visibility: "+i.esri.visible);a.log("Loading layer from: "+i.esri.url);var s=new r({id:i.id,url:i.esri.url,definitionExpression:i.esri.definitionExpression,raw:i,visible:i.esri.visible});if(s.raw.esri.renderer){a.log("Applying renderer...");s.renderer=o.fromJSON(s.raw.esri.renderer)}s.then(function(){a.log("Layer "+s.title+" ready!");a.log("View waiting changes...");if(s.raw.esri.type===1){s.minScale=s.raw.esri.minScale!==null?s.raw.esri.minScale:0;s.maxScale=s.raw.esri.maxScale!==null?s.raw.esri.maxScale:0;a.log("minScale: "+s.minScale+" and maxScale: "+s.maxScale+" defined manually")}});n.global.map.add(s)};var u=function e(r){var t=n.global.map;return t.allLayers.find(function(e){if(e.raw!==undefined){if(e.raw.title===r||e.raw.id===r){return e}}})};var c=function e(r,t){var o=u(r);if(o){o.visible=t;a.log("Change visibility of layer: "+r+" to: "+t)}else{a.error("Can't find layer: "+r+" in map. You already added this layer?")}};var d=function e(r,t){var o=u(r);if(o){o.opacity=t/100;a.log("Change opacity of layer: "+r+" to: "+t)}else{a.error("Can't find layer: "+r+" in map. You already added this layer?")}};var f=function e(r){var t=n.global.map;t.allLayers.map(function(e){if(e.raw!==undefined){if(e.visible===!r){e.visible=r;a.log("Change visibility of layer: "+e.raw.title+" to: "+r)}}})};var p=function e(){f(false)};var y=function e(){f(true)};r.create=s;r.addNew=l;r.setVisibility=c;r.setOpacity=d;r.hideAll=p;r.showAll=y},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});var o=r.prefix="[ArcEasy]";var a=r.global={map:"",view:"",options:{element:"",scale:25e6,center:{longitude:-13.78,latitude:-52.17},basemap:"streets",stars:"",atmosphere:"",cors:"",proxy:""},loaded:false};var n=r.constructors={layer:{FeatureLayer:"",TileLayer:""},map:"",container:"",view:"",utils:{watchUtils:"",Search:"",jsonUtils:"",Extent:""},renderer:{UniqueValueRenderer:"",ClassBreaksRenderer:"",ExtrudeSymbol3DLayer:"",PolygonSymbol3D:"",SimpleRenderer:"",SimpleMarkerSymbol:"",PictureMarkerSymbol:"",SimpleLineSymbol:"",SimpleFillSymbol:""}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});r.layers=r.view=r.map=undefined;var o=t(0);var a=u(o);var n=t(2);var i=u(n);var s=t(3);var l=u(s);function u(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t))r[t]=e[t]}}r.default=e;return r}}r.map=a;r.view=i;r.layers=l},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:true});r["isLoaded"]=a;r["bootstrap"]=n;r["dojoRequire"]=i;function o(){return document.querySelector("script[data-esri-loader]")}function a(){return typeof window["require"]!=="undefined"&&o()}function n(e,r){if(r===void 0){r={}}if(!r.url){r.url="https://js.arcgis.com/4.3/"}if(o()){e(new Error("The ArcGIS API for JavaScript is already loaded."));return}var t=document.createElement("script");t.type="text/javascript";t.src=r.url;t.dataset["esriLoader"]="loading";t.onload=function(){t.dataset["esriLoader"]="loaded";var r=window["require"];if(e){e(null,r)}};document.body.appendChild(t)}function i(e,r){if(a()){window["require"](e,r)}else{var t=o();if(t){var n=function(){window["require"](e,r);t.removeEventListener("load",n,false)};t.addEventListener("load",n)}else{throw new Error("The ArcGIS API for JavaScript has not been loaded. You must first call esriLoader.bootstrap()")}}}r["default"]={isLoaded:a,bootstrap:n,dojoRequire:i}}]);
//# sourceMappingURL=arceasy.js.map